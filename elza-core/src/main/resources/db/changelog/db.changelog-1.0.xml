<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <!--Verze 1.0 - vytvoreni schematu databaze-->

    <changeSet id="1" author="bendik">

        <createTable tableName="db_hibernate_sequences">
            <column name="sequence_name" type="varchar(255)">
                <constraints primaryKey="true"/>
            </column>
            <column name="next_val" type="bigint"/>
        </createTable>

        <createTable tableName="arr_change">
            <column name="change_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="change_date" type="timestamp"/>
        </createTable>

        <createTable tableName="arr_level">
            <column name="level_id" type="int">
                <constraints primaryKey="true"/>
            </column>

            <column name="create_change_id" type="int"/>
            <column name="delete_change_id" type="int"/>
            <column name="node_id" type="int"/>
            <column name="node_id_parent" type="int"/>
            <column name="position" type="int"/>
        </createTable>

        <createTable tableName="arr_finding_aid">
            <column name="finding_aid_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="create_date" type="timestamp"/>
            <column name="name" type="varchar(255)"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="rul_arrangement_type">
            <column name="arrangement_type_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="code" type="varchar(50)"/>
            <column name="name" type="varchar(250)"/>
            <column name="rule_set_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_rule_set">
            <column name="rule_set_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="code" type="varchar(50)"/>
            <column name="name" type="varchar(250)"/>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_finding_aid_version">
            <column name="finding_aid_version_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="arrangement_type_id" type="int"/>
            <column name="create_change_id" type="int"/>
            <column name="finding_aid_id" type="int"/>
            <column name="lock_change_id" type="int"/>
            <column name="rule_set_id" type="int"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
            <column name="root_level_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="last_arr_fa_change_id" type="int"/>
        </createTable>

        <createTable tableName="arr_desc_item">
            <column name="desc_item_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="create_change_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="delete_change_id" type="int"/>
            <column name="desc_item_object_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_spec_id" type="int"/>
            <column name="node_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="position" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="arr_data">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="data_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_id" type="int"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="arr_data_unitdate">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="calendar_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="value_from" type="char(19)">
                <constraints nullable="true"/>
            </column>
            <column name="value_from_estimated" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="value_to" type="char(19)">
                <constraints nullable="true"/>
            </column>
            <column name="value_to_estimated" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="format" defaultValue="" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_string">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="varchar(1000)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_unitid">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_integer">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_text">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="text">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_decimal">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="decimal">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_fa_view">
            <column name="fa_view_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="arrangement_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="rule_set_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="view_specification" type="varchar(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="rul_desc_item_type">
            <column name="desc_item_type_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="data_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="varchar(50)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="shortcut" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="is_value_unique" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="can_be_ordered" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="use_specification" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="view_order" type="int"/>
            <column name="fa_only" type="boolean"/>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_desc_item_spec">
            <column name="desc_item_spec_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="desc_item_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="varchar(50)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="shortcut" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="view_order" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_data_type">
            <column name="data_type_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="code" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="regexp_use" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="text_lenght_limit_use" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="storage_table" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="par_party_type">
            <column name="party_type_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="code" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="text">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="par_party">
            <column name="party_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="record_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="int" defaultValueNumeric="0"/>
            <column name="party_type_id" type="int">
                <constraints nullable="true"/>
            </column>
            <column name="preferred_name_id" type="int">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="reg_external_source">
            <column name="external_source_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="code" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="reg_variant_record">
            <column name="variant_record_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="record_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="record" type="varchar(1000)"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="reg_record">
            <column name="record_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="register_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="external_source_id" type="int"/>
            <column name="record" type="varchar(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="characteristics" type="text"/>
            <column name="comment" type="text"/>
            <column name="local" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="external_id" type="varchar(250)"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="reg_register_type">
            <column name="register_type_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="code" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="parent_register_type_id" type="int">
                <constraints nullable="true"/>
            </column>
            <column name="hierarchical" type="boolean">
                <constraints nullable="true"/>
            </column>
            <column name="add_record" type="boolean">
                <constraints nullable="true"/>
            </column>
            <column name="party_type_id" type="int">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_coordinates">
            <column name="value" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_record_ref">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="record_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_party_ref">
            <column name="position" type="int"/>
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="party_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="par_party_name">
            <column name="party_name_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="party_id" type="int"/>
            <column name="main_part" type="varchar(255)"/>
            <column name="other_part" type="varchar(255)"/>
            <column name="annotation" type="text"/>
            <column name="degree_before" type="varchar(50)"/>
            <column name="degree_after" type="varchar(50)"/>
            <column name="valid_from" type="timestamp"/>
            <column name="valid_to" type="timestamp"/>
        </createTable>

        <createTable tableName="arr_node">
            <column name="node_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="version" type="int" defaultValueNumeric="0"/>
            <column name="last_update" type="timestamp"/>
            <column name="uuid" defaultValue="" type="char(36)"/>
        </createTable>

        <createTable tableName="rul_desc_item_constraint">
            <column name="desc_item_constraint_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="desc_item_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_spec_id" type="int"/>
            <column name="finding_aid_version_id" type="int"/>
            <column name="repeatable" type="boolean"/>
            <column name="regexp" type="varchar(500)"/>
            <column name="text_lenght_limit" type="int"/>
            <column name="code" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_desc_item_spec_register">
            <column name="desc_item_spec_register_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="register_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_spec_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_calendar_type">
            <column name="calendar_type_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="code" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_node_register">
            <column name="node_register_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="record_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="node_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="create_change_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="delete_change_id" type="int"/>
        </createTable>

        <createTable tableName="rul_packet_type">
            <column name="packet_type_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="code" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="shortcut" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_packet">
            <column name="packet_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="storage_number" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="invalid_packet" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="packet_type_id" type="int">
                <constraints nullable="true"/>
            </column>
            <column name="finding_aid_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_packet_ref">
            <column name="data_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="packet_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_fa_bulk_action">
            <column name="arr_fa_bulk_action_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="bulk_action_code" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="fa_version_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="fa_change_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_null">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
        </createTable>

        <createTable tableName="arr_node_conformity_info">
            <column name="node_conformity_info_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="node_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="fa_version_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="state" type="char(3)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="varchar(1000)"/>
            <column name="date" type="timestamp"/>
        </createTable>

        <createTable tableName="arr_node_conformity_missing">
            <column name="node_conformity_missing_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="node_conformity_info_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_spec_id" type="int"/>
            <column name="description" type="varchar(1000)"/>
        </createTable>

        <createTable tableName="arr_node_conformity_errors">
            <column name="node_conformity_errors_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="node_conformity_info_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="varchar(1000)"/>
        </createTable>

        <createTable tableName="arr_fa_version_conformity_info">
            <column name="fa_version_conformity_info_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="fa_version_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="state" type="char(3)"/>
            <column name="state_description" type="varchar(1000)"/>
        </createTable>

        <createTable tableName="rul_package">
            <column name="package_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="name" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="varchar(50)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="description" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="version" type="int" />
        </createTable>

        <createTable tableName="rul_action">
            <column name="action_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="filename" type="varchar(250)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_rule">
            <column name="rule_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="filename" type="varchar(250)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="rule_type" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="priority" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="rule_set_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint constraintName="fk_arr_level_1"
                                 baseTableName="arr_level"
                                 baseColumnNames="create_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_level_2"
                                 baseTableName="arr_level"
                                 baseColumnNames="delete_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_1"
                                 baseTableName="arr_finding_aid_version"
                                 baseColumnNames="lock_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_2"
                                 baseTableName="arr_finding_aid_version"
                                 baseColumnNames="rule_set_id"
                                 referencedTableName="rul_rule_set"
                                 referencedColumnNames="rule_set_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_3"
                                 baseTableName="arr_finding_aid_version"
                                 baseColumnNames="create_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_4"
                                 baseTableName="arr_finding_aid_version"
                                 baseColumnNames="arrangement_type_id"
                                 referencedTableName="rul_arrangement_type"
                                 referencedColumnNames="arrangement_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_5"
                                 baseTableName="arr_finding_aid_version"
                                 baseColumnNames="finding_aid_id"
                                 referencedTableName="arr_finding_aid"
                                 referencedColumnNames="finding_aid_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataString_data"
                                 baseTableName="arr_data_string"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataInt_data"
                                 baseTableName="arr_data_integer"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataText_data"
                                 baseTableName="arr_data_text"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_data_descItem"
                                 baseTableName="arr_data"
                                 baseColumnNames="desc_item_id"
                                 referencedTableName="arr_desc_item"
                                 referencedColumnNames="desc_item_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_data_dataType"
                                 baseTableName="arr_data"
                                 baseColumnNames="data_type_id"
                                 referencedTableName="rul_data_type"
                                 referencedColumnNames="data_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataDecimal_data"
                                 baseTableName="arr_data_decimal"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_descItem_crChange"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="create_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_descItem_delChange"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="delete_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_descItem_descItemType"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="desc_item_type_id"
                                 referencedTableName="rul_desc_item_type"
                                 referencedColumnNames="desc_item_type_id"
                                 onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_descItem_descItemSpec"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="desc_item_spec_id"
                                 referencedTableName="rul_desc_item_spec"
                                 referencedColumnNames="desc_item_spec_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_view_arrType"
                                 baseTableName="rul_fa_view"
                                 baseColumnNames="arrangement_type_id"
                                 referencedTableName="rul_arrangement_type"
                                 referencedColumnNames="arrangement_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_view_ruleSet"
                                 baseTableName="rul_fa_view"
                                 baseColumnNames="rule_set_id"
                                 referencedTableName="rul_rule_set"
                                 referencedColumnNames="rule_set_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemType_dataType"
                                 baseTableName="rul_desc_item_type"
                                 baseColumnNames="data_type_id"
                                 referencedTableName="rul_data_type"
                                 referencedColumnNames="data_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemConst_itmType"
                                 baseTableName="rul_desc_item_constraint"
                                 baseColumnNames="desc_item_type_id"
                                 referencedTableName="rul_desc_item_type"
                                 referencedColumnNames="desc_item_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemConst_itmSpec"
                                 baseTableName="rul_desc_item_constraint"
                                 baseColumnNames="desc_item_spec_id"
                                 referencedTableName="rul_desc_item_spec"
                                 referencedColumnNames="desc_item_spec_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemConst_version"
                                 baseTableName="rul_desc_item_constraint"
                                 baseColumnNames="finding_aid_version_id"
                                 referencedTableName="arr_finding_aid_version"
                                 referencedColumnNames="finding_aid_version_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemSpec_descItmTyp"
                                 baseTableName="rul_desc_item_spec"
                                 baseColumnNames="desc_item_type_id"
                                 referencedTableName="rul_desc_item_type"
                                 referencedColumnNames="desc_item_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_party_regRecord"
                                 baseTableName="par_party"
                                 baseColumnNames="record_id"
                                 referencedTableName="reg_record"
                                 referencedColumnNames="record_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_variantRecord_regRecord"
                                 baseTableName="reg_variant_record"
                                 baseColumnNames="record_id"
                                 referencedTableName="reg_record"
                                 referencedColumnNames="record_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_record_regRegisterType"
                                 baseTableName="reg_record"
                                 baseColumnNames="register_type_id"
                                 referencedTableName="reg_register_type"
                                 referencedColumnNames="register_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_record_regExternalSource"
                                 baseTableName="reg_record"
                                 baseColumnNames="external_source_id"
                                 referencedTableName="reg_external_source"
                                 referencedColumnNames="external_source_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataCoordinates_data"
                                 baseTableName="arr_data_coordinates"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataRecordRef_data"
                                 baseTableName="arr_data_record_ref"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataRecordRef_record"
                                 baseTableName="arr_data_record_ref"
                                 baseColumnNames="record_id"
                                 referencedTableName="reg_record"
                                 referencedColumnNames="record_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataPartyRef_data"
                                 baseTableName="arr_data_party_ref"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataPartyRef_party"
                                 baseTableName="arr_data_party_ref"
                                 baseColumnNames="party_id"
                                 referencedTableName="par_party"
                                 referencedColumnNames="party_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataUnitid_data"
                                 baseTableName="arr_data_unitid"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataUnitdate_data_2"
                                 baseTableName="arr_data_unitdate"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_partyName_party"
                                 baseTableName="par_party_name"
                                 baseColumnNames="party_id"
                                 referencedTableName="par_party"
                                 referencedColumnNames="party_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rulSet_arrType"
                                 baseTableName="rul_arrangement_type"
                                 baseColumnNames="rule_set_id"
                                 referencedTableName="rul_rule_set"
                                 referencedColumnNames="rule_set_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_level_node"
                                 baseTableName="arr_level"
                                 baseColumnNames="node_id"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_level_node_parent"
                                 baseTableName="arr_level"
                                 baseColumnNames="node_id_parent"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_descItem_node"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="node_id"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_faVersion_level"
                                 baseTableName="arr_finding_aid_version"
                                 baseColumnNames="root_level_id"
                                 referencedTableName="arr_level"
                                 referencedColumnNames="level_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_rule_set_package"
                                 baseTableName="rul_rule_set"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_arrangement_type_package"
                                 baseTableName="rul_arrangement_type"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_desc_item_type_package"
                                 baseTableName="rul_desc_item_type"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_desc_item_spec_package"
                                 baseTableName="rul_desc_item_spec"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_desc_item_constraint_package"
                                 baseTableName="rul_desc_item_constraint"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_action_package"
                                 baseTableName="rul_action"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_rule_package"
                                 baseTableName="rul_rule"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_rule_rule_set"
                                 baseTableName="rul_rule"
                                 baseColumnNames="rule_set_id"
                                 referencedTableName="rul_rule_set"
                                 referencedColumnNames="rule_set_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rulDescItemSpecRegister_registerType"
                                 baseTableName="rul_desc_item_spec_register" baseColumnNames="register_type_id"
                                 referencedTableName="reg_register_type"
                                 referencedColumnNames="register_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rulDescItemSpecRegister_descItemSpec"
                                 baseTableName="rul_desc_item_spec_register" baseColumnNames="desc_item_spec_id"
                                 referencedTableName="rul_desc_item_spec"
                                 referencedColumnNames="desc_item_spec_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrDataUnitdate_calendarType"
                                 baseTableName="arr_data_unitdate" baseColumnNames="calendar_type_id"
                                 referencedTableName="arr_calendar_type"
                                 referencedColumnNames="calendar_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_regRegisterType_parPartyType"
                                 baseTableName="reg_register_type" baseColumnNames="party_type_id"
                                 referencedTableName="par_party_type"
                                 referencedColumnNames="party_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_regRegisterType_regRegisterType"
                                 baseTableName="reg_register_type" baseColumnNames="parent_register_type_id"
                                 referencedTableName="reg_register_type"
                                 referencedColumnNames="register_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_parParty_parPartyType"
                                 baseTableName="par_party" baseColumnNames="party_type_id"
                                 referencedTableName="par_party_type"
                                 referencedColumnNames="party_type_id" onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_parParty_parPartyName"
                                 baseTableName="par_party" baseColumnNames="preferred_name_id"
                                 referencedTableName="par_party_name"
                                 referencedColumnNames="party_name_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_nodeRegister_record"
                                 baseTableName="arr_node_register"
                                 baseColumnNames="record_id"
                                 referencedTableName="reg_record"
                                 referencedColumnNames="record_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_nodeRegister_node"
                                 baseTableName="arr_node_register"
                                 baseColumnNames="node_id"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_nodeRegister_crChange"
                                 baseTableName="arr_node_register"
                                 baseColumnNames="create_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_nodeRegister_delChange"
                                 baseTableName="arr_node_register"
                                 baseColumnNames="delete_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_packet_packetType"
                                 baseTableName="arr_packet"
                                 baseColumnNames="packet_type_id"
                                 referencedTableName="rul_packet_type"
                                 referencedColumnNames="packet_type_id"
                                 onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_packet_findingAid"
                                 baseTableName="arr_packet"
                                 baseColumnNames="finding_aid_id"
                                 referencedTableName="arr_finding_aid"
                                 referencedColumnNames="finding_aid_id"
                                 onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_packetRef_data"
                                 baseTableName="arr_data_packet_ref"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_packetRef_packet"
                                 baseTableName="arr_data_packet_ref"
                                 baseColumnNames="packet_id"
                                 referencedTableName="arr_packet"
                                 referencedColumnNames="packet_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrFaVersionConfInfo_faVersion"
                                 baseTableName="arr_fa_version_conformity_info" baseColumnNames="fa_version_id"
                                 referencedTableName="arr_finding_aid_version"
                                 referencedColumnNames="finding_aid_version_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrFaBulkAction_faVersion"
                                 baseTableName="arr_fa_bulk_action" baseColumnNames="fa_version_id"
                                 referencedTableName="arr_finding_aid_version"
                                 referencedColumnNames="finding_aid_version_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrFaBulkAction_faChange"
                                 baseTableName="arr_fa_bulk_action" baseColumnNames="fa_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataNull_data"
                                 baseTableName="arr_data_null"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfInfo_faNode"
                                 baseTableName="arr_node_conformity_info" baseColumnNames="node_id"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfInfo_faVersion"
                                 baseTableName="arr_node_conformity_info" baseColumnNames="fa_version_id"
                                 referencedTableName="arr_finding_aid_version"
                                 referencedColumnNames="finding_aid_version_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfMiss_nodConfInf"
                                 baseTableName="arr_node_conformity_missing" baseColumnNames="node_conformity_info_id"
                                 referencedTableName="arr_node_conformity_info"
                                 referencedColumnNames="node_conformity_info_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfMiss_descItmTyp"
                                 baseTableName="arr_node_conformity_missing" baseColumnNames="desc_item_type_id"
                                 referencedTableName="rul_desc_item_type"
                                 referencedColumnNames="desc_item_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfMiss_descItmSpc"
                                 baseTableName="arr_node_conformity_missing" baseColumnNames="desc_item_spec_id"
                                 referencedTableName="rul_desc_item_spec"
                                 referencedColumnNames="desc_item_spec_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfErr_nodConfInf"
                                 baseTableName="arr_node_conformity_errors" baseColumnNames="node_conformity_info_id"
                                 referencedTableName="arr_node_conformity_info"
                                 referencedColumnNames="node_conformity_info_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfErr_descItem"
                                 baseTableName="arr_node_conformity_errors" baseColumnNames="desc_item_id"
                                 referencedTableName="arr_desc_item"
                                 referencedColumnNames="desc_item_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_packet_type_package"
                                 baseTableName="rul_packet_type"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addUniqueConstraint tableName="arr_level" columnNames="position,node_id_parent,delete_change_id"
                             constraintName="u_arr_level_ppd"/>

        <addUniqueConstraint columnNames="view_order"
                             constraintName="rul_desc_item_type_view_order_key"
                             tableName="rul_desc_item_type"/>

        <addUniqueConstraint tableName="rul_packet_type" columnNames="code" constraintName="u_rul_packet_type_code"/>

        <addUniqueConstraint columnNames="uuid" tableName="arr_node"/>

        <addUniqueConstraint tableName="arr_packet" columnNames="finding_aid_id, storage_number" />

        <addNotNullConstraint columnName="fa_only"
                              defaultNullValue="false"
                              tableName="rul_desc_item_type"/>

        <addNotNullConstraint columnDataType="int"
                              columnName="party_type_id"
                              tableName="par_party"/>

        <addNotNullConstraint tableName="arr_node" columnName="uuid"/>

        <addNotNullConstraint columnDataType="int"
                              columnName="last_arr_fa_change_id"
                              tableName="arr_finding_aid_version"/>

        <createIndex tableName="arr_level" indexName="i_node_id_1">
            <column name="node_id"/>
            <column name="delete_change_id"/>
            <column name="create_change_id"/>
        </createIndex>

        <createIndex tableName="arr_level" indexName="i_node_id_parent_1">
            <column name="node_id_parent"/>
            <column name="delete_change_id"/>
            <column name="create_change_id"/>
        </createIndex>

    </changeSet>

</databaseChangeLog>
