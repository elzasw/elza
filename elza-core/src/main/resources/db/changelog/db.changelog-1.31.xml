<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet id="32" author="compel">
        <delete tableName="arr_bulk_action_node" />
        <delete tableName="arr_bulk_action_run" />
        <dropColumn tableName="arr_bulk_action_run">
            <column name="change_id" />
        </dropColumn>
        <addColumn tableName="arr_bulk_action_run">
            <column name="user_id" type="int">
                <constraints nullable="true"/>
            </column>
            <column name="change_id" type="int">
                <constraints nullable="true"/>
            </column>
            <column afterColumn="change_id" name="state" type="varchar(16)">
                <constraints nullable="false" />
            </column>
            <column afterColumn="state" name="date_planned" type="timestamp">
                <constraints nullable="true" />
            </column>
            <column afterColumn="date_planned" name="date_started" type="timestamp">
                <constraints nullable="true" />
            </column>
            <column afterColumn="date_started" name="date_finished" type="timestamp">
                <constraints nullable="true" />
            </column>
            <column afterColumn="date_finished" name="error" type="varchar(1000)">
                <constraints nullable="true" />
            </column>
        </addColumn>
    </changeSet>

</databaseChangeLog>