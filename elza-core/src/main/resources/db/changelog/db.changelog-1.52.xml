<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet id="53" author="vanek">

        <addColumn tableName="rul_template">
            <column type="VARCHAR(50)" name="extension"/>
            <column type="VARCHAR(50)" name="mime_type"/>
        </addColumn>
        
        <update tableName="rul_template">
            <column name="extension" value="pdf" />
            <where>engine = 'JASPER'</where>
        </update>
        <update tableName="rul_template">
            <column name="extension" value="csv" />
            <where>engine = 'FREEMARKER'</where>
        </update>
        <update tableName="rul_template">
            <column name="mime_type" value="application/pdf" />
            <where>engine = 'JASPER'</where>
        </update>
        <update tableName="rul_template">
            <column name="mime_type" value="text/csv" />
            <where>engine = 'FREEMARKER'</where>
        </update>
        <addNotNullConstraint tableName="rul_template" columnName="extension" columnDataType="VARCHAR(50)" />        
        <addNotNullConstraint tableName="rul_template" columnName="mime_type" columnDataType="VARCHAR(50)" />        
    </changeSet>

</databaseChangeLog>