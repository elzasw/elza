<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <!--Verze 1.0 - vytvoreni schematu databaze-->
    <changeSet id="1" author="bendik">
  <!-- Run this only on new DB (before db.elza-0.9.xml -->
  <preConditions onFail="MARK_RAN">
    <not>
      <changeSetExecuted id="20161124152303" author="compel" changeLogFile="db/changelog/db.elza-0.9.xml" />
    </not>
  </preConditions>

        <createTable tableName="db_hibernate_sequences">
            <column name="sequence_name" type="nvarchar(255)">
                <constraints primaryKey="true"/>
            </column>
            <column name="next_val" type="bigint"/>
        </createTable>

        <!-- Referenced table -->
        <createTable tableName="rul_data_type">
            <column name="data_type_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="code" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="${type.text}">
                <constraints nullable="false"/>
            </column>
            <column name="regexp_use" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="text_lenght_limit_use" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="storage_table" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <createTable tableName="arr_calendar_type">
            <column name="calendar_type_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="code" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <!-- Infrastruktura pro Party -->
        <createTable tableName="par_unitdate">
            <column name="unitdate_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="calendar_type_id" type="int" />
            <column name="value_from" type="nvarchar(19)" />
            <column name="value_from_estimated" type="boolean" />
            <column name="value_to" type="nvarchar(19)" />
            <column name="value_to_estimated" type="boolean" />
            <column name="format" type="nvarchar(50)" />
            <column name="text_date" type="nvarchar(250)" />
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parUnitdate_arrCalendarType"
                baseTableName="par_unitdate" baseColumnNames="calendar_type_id"
                referencedTableName="arr_calendar_type" referencedColumnNames="calendar_type_id"
                onDelete="NO ACTION" />

        <createTable tableName="par_party_name_form_type">
            <column name="name_form_type_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="code" type="nvarchar(50)" >
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="name" type="nvarchar(250)" />
        </createTable>

        <createTable tableName="par_complement_type">
            <column name="complement_type_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="code" type="nvarchar(50)" >
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false" />
            </column>
            <column name="view_order" type="int">
                <constraints nullable="false" />
            </column>
        </createTable>

        <createTable tableName="par_party_type">
            <column name="party_type_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="code" type="nvarchar(50)">
                <constraints nullable="false" unique="true" />
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="${type.text}">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <!-- Vlastni definice party -->
        <createTable tableName="par_party">
            <column name="party_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="record_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="int" defaultValueNumeric="0"/>
            <column name="party_type_id" type="int">
                <constraints nullable="true"/>
            </column>
            <column name="preferred_name_id" type="int">
                <constraints nullable="true"/>
            </column>
            <column name="history" type="${type.text}" />
            <column name="source_information" type="${type.text}" />
            <column name="characteristics" type="nvarchar(1000)" />
            <column name="from_unitdate_id" type="int"/>
            <column name="to_unitdate_id" type="int"/>
        </createTable>

        <addForeignKeyConstraint
                constraintName="fk_parParty_fromParUnitdate"
                baseTableName="par_party" baseColumnNames="from_unitdate_id"
                referencedTableName="par_unitdate" referencedColumnNames="unitdate_id"
                onDelete="NO ACTION"/>
        <addForeignKeyConstraint
                constraintName="fk_parParty_toParUnitdate"
                baseTableName="par_party" baseColumnNames="to_unitdate_id"
                referencedTableName="par_unitdate" referencedColumnNames="unitdate_id"
                onDelete="NO ACTION"/>

        <createTable tableName="par_party_name">
            <column name="party_name_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="valid_from_unitdate_id" type="int" />
            <column name="valid_to_unitdate_id" type="int" />
            <column name="name_form_type_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="party_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="main_part" type="nvarchar(250)">
                <constraints nullable="false" />
            </column>
            <column name="other_part" type="nvarchar(250)" />
            <column name="note" type="${type.text}" />
            <column name="degree_before" type="nvarchar(50)" />
            <column name="degree_after" type="nvarchar(50)" />
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parPartyName_fromParUnitdate"
                baseTableName="par_party_name" baseColumnNames="valid_from_unitdate_id"
                referencedTableName="par_unitdate" referencedColumnNames="unitdate_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parPartyName_toParUnitdate"
                baseTableName="par_party_name" baseColumnNames="valid_to_unitdate_id"
                referencedTableName="par_unitdate" referencedColumnNames="unitdate_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parPartyName_parPartyNameFormType"
                baseTableName="par_party_name" baseColumnNames="name_form_type_id"
                referencedTableName="par_party_name_form_type" referencedColumnNames="name_form_type_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parPartyName_parParty"
                baseTableName="par_party_name" baseColumnNames="party_id"
                referencedTableName="par_party" referencedColumnNames="party_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parParty_parPartyName"
                baseTableName="par_party" baseColumnNames="preferred_name_id"
                referencedTableName="par_party_name"
                referencedColumnNames="party_name_id" onDelete="NO ACTION" />
        <createTable tableName="par_party_name_complement">
            <column name="party_name_complement_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="complement_type_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="party_name_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="complement" type="nvarchar(1000)">
                <constraints nullable="false" />
            </column>
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parPartynameComplement_parComplementType"
                baseTableName="par_party_name_complement" baseColumnNames="complement_type_id"
                referencedTableName="par_complement_type" referencedColumnNames="complement_type_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parPartynameComplement_parPartyName"
                baseTableName="par_party_name_complement" baseColumnNames="party_name_id"
                referencedTableName="par_party_name" referencedColumnNames="party_name_id"
                onDelete="NO ACTION" />


        <createTable tableName="par_creator">
            <column name="creator_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="creator_party_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="party_id" type="int" >
                <constraints nullable="false" />
            </column>
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parCreator_creatorParParty"
                baseTableName="par_creator" baseColumnNames="creator_party_id"
                referencedTableName="par_party" referencedColumnNames="party_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parCreator_parParty"
                baseTableName="par_creator" baseColumnNames="party_id"
                referencedTableName="par_party" referencedColumnNames="party_id"
                onDelete="NO ACTION" />

        <createTable tableName="par_party_type_complement_type">
            <column name="party_type_complement_type_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="complement_type_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="party_type_id" type="int" >
                <constraints nullable="false" />
            </column>
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parPartyTypeComplementType_parComplementType"
                baseTableName="par_party_type_complement_type" baseColumnNames="complement_type_id"
                referencedTableName="par_complement_type" referencedColumnNames="complement_type_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parPartyTypeComplementType_parPartyType"
                baseTableName="par_party_type_complement_type" baseColumnNames="party_type_id"
                referencedTableName="par_party_type" referencedColumnNames="party_type_id"
                onDelete="NO ACTION" />

        <createTable tableName="par_party_group">
            <column name="party_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="scope" type="nvarchar(1000)" >
                <constraints nullable="false" />
            </column>
            <column name="founding_norm" type="nvarchar(50)" />
            <column name="scope_norm" type="nvarchar(250)" />
            <column name="organization" type="nvarchar(1000)" />
        </createTable>

        <createTable tableName="par_party_group_identifier">
            <column name="party_group_identifier_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="to_unitdate_id" type="int" />
            <column name="from_unitdate_id" type="int" />
            <column name="party_id" type="int" >
                <constraints nullable="false"/>
            </column>
            <column name="source" type="nvarchar(50)" />
            <column name="note" type="${type.text}" />
            <column name="identifier" type="nvarchar(50)" >
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parPartyGroupIdentifier_toParUnitdate"
                baseTableName="par_party_group_identifier" baseColumnNames="to_unitdate_id"
                referencedTableName="par_unitdate" referencedColumnNames="unitdate_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parPartyGroupIdentifier_fromParUnitdate"
                baseTableName="par_party_group_identifier" baseColumnNames="from_unitdate_id"
                referencedTableName="par_unitdate" referencedColumnNames="unitdate_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parPartyGroupIdentifier_parPartyGroup"
                baseTableName="par_party_group_identifier" baseColumnNames="party_id"
                referencedTableName="par_party_group" referencedColumnNames="party_id"
                onDelete="NO ACTION" />

        <createTable tableName="par_dynasty">
            <column name="party_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="genealogy" type="${type.text}" >
                <constraints nullable="false" />
            </column>
        </createTable>

        <createTable tableName="par_event">
            <column name="party_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
        </createTable>

        <createTable tableName="par_person">
            <column name="party_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
        </createTable>

        <!-- Registry/AccessPoints -->
        <createTable tableName="reg_scope">
            <column name="scope_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="code" type="nvarchar(50)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="reg_register_type">
            <column name="register_type_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="code" type="nvarchar(50)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="parent_register_type_id" type="int">
                <constraints nullable="true"/>
            </column>
            <column name="hierarchical" type="boolean">
                <constraints nullable="true"/>
            </column>
            <column name="add_record" type="boolean">
                <constraints nullable="true"/>
            </column>
            <column name="party_type_id" type="int">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="reg_external_source">
            <column name="external_source_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="code" type="nvarchar(50)">
                <constraints nullable="false" unique="true" />
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="reg_variant_record">
            <column name="variant_record_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="record_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="record" type="nvarchar(1000)"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="reg_record">
            <column name="record_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="register_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="external_source_id" type="int"/>
            <column name="record" type="nvarchar(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="characteristics" type="${type.text}"/>
            <column name="note" type="${type.text}"/>
            <column name="external_id" type="nvarchar(250)"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
            <column name="parent_record_id" type="int"/>
            <column name="scope_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint
                constraintName="fk_regRecord_regRecord"
                baseTableName="reg_record" baseColumnNames="parent_record_id"
                referencedTableName="reg_record" referencedColumnNames="record_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint constraintName="fk_regRegisterType_parPartyType"
                                 baseTableName="reg_register_type" baseColumnNames="party_type_id"
                                 referencedTableName="par_party_type"
                                 referencedColumnNames="party_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_regRegisterType_regRegisterType"
                                 baseTableName="reg_register_type" baseColumnNames="parent_register_type_id"
                                 referencedTableName="reg_register_type"
                                 referencedColumnNames="register_type_id" onDelete="NO ACTION"/>
        <addForeignKeyConstraint
                constraintName="fk_record_scope"
                baseTableName="reg_record" baseColumnNames="scope_id"
                referencedTableName="reg_scope" referencedColumnNames="scope_id"
                onDelete="NO ACTION"/>

        <!-- Vztahy u osob -->
        <createTable tableName="par_relation_type">
            <column name="relation_type_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="name" type="nvarchar(250)" >
                <constraints nullable="false"/>
            </column>
            <column name="code" type="nvarchar(50)" >
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="class_type" type="nvarchar(50)" />
        </createTable>

        <createTable tableName="par_party_type_relation">
            <column name="party_type_relation_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="relation_type_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="party_type_id" type="int" >
                <constraints nullable="false" />
            </column>
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parPartyTypeRelation_parRelationType"
                baseTableName="par_party_type_relation" baseColumnNames="relation_type_id"
                referencedTableName="par_relation_type" referencedColumnNames="relation_type_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parPartyTypeRelation_parPartyType"
                baseTableName="par_party_type_relation" baseColumnNames="party_type_id"
                referencedTableName="par_party_type" referencedColumnNames="party_type_id"
                onDelete="NO ACTION" />

        <createTable tableName="par_relation">
            <column name="relation_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="party_id" type="int" >
                <constraints nullable="false"/>
            </column>
            <column name="relation_type_id" type="int" >
                <constraints nullable="false"/>
            </column>
            <column name="from_unitdate_id" type="int" />
            <column name="to_unitdate_id" type="int" />
            <column name="date_note" type="nvarchar(1000)" />
            <column name="note" type="nvarchar(1000)" />
            <column name="version" type="int" defaultValueNumeric="0"/>
            <column name="source" type="${type.text}"/>
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parRelation_parParty"
                baseTableName="par_relation" baseColumnNames="party_id"
                referencedTableName="par_party" referencedColumnNames="party_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parRelation_parRelationType"
                baseTableName="par_relation" baseColumnNames="relation_type_id"
                referencedTableName="par_relation_type" referencedColumnNames="relation_type_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parRelation_fromParUnitdate"
                baseTableName="par_relation" baseColumnNames="from_unitdate_id"
                referencedTableName="par_unitdate" referencedColumnNames="unitdate_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parRelation_toParUnitdate"
                baseTableName="par_relation" baseColumnNames="to_unitdate_id"
                referencedTableName="par_unitdate" referencedColumnNames="unitdate_id"
                onDelete="NO ACTION" />

        <createTable tableName="par_relation_role_type">
            <column name="role_type_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="name" type="nvarchar(250)" >
                <constraints nullable="false"/>
            </column>
            <column name="code" type="nvarchar(50)" >
                <constraints nullable="false" unique="true"/>
            </column>
        </createTable>

        <createTable tableName="par_relation_type_role_type">
            <column name="relation_type_role_type_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="relation_type_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="role_type_id" type="int" >
                <constraints nullable="false" />
            </column>
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parRelationTypeRoleType_parRelationType"
                baseTableName="par_relation_type_role_type" baseColumnNames="relation_type_id"
                referencedTableName="par_relation_type" referencedColumnNames="relation_type_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parRelationTypeRoleType_parRelationRoleType"
                baseTableName="par_relation_type_role_type" baseColumnNames="role_type_id"
                referencedTableName="par_relation_role_type" referencedColumnNames="role_type_id"
                onDelete="NO ACTION" />

        <createTable tableName="par_relation_entity">
            <column name="relation_entity_id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="relation_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="record_id" type="int" >
                <constraints nullable="false" />
            </column>
            <column name="role_type_id" type="int" >
                <constraints nullable="false" />
            </column>
        </createTable>
        <addForeignKeyConstraint
                constraintName="fk_parRelationEntity_parRelationType"
                baseTableName="par_relation_entity" baseColumnNames="relation_id"
                referencedTableName="par_relation" referencedColumnNames="relation_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parRelationEntity_regRecord"
                baseTableName="par_relation_entity" baseColumnNames="record_id"
                referencedTableName="reg_record" referencedColumnNames="record_id"
                onDelete="NO ACTION" />
        <addForeignKeyConstraint
                constraintName="fk_parRelationEntity_parRelationRoleType"
                baseTableName="par_relation_entity" baseColumnNames="role_type_id"
                referencedTableName="par_relation_role_type" referencedColumnNames="role_type_id"
                onDelete="NO ACTION" />

        <createTable tableName="par_registry_role">
            <column name="registry_role_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="register_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="role_type_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint constraintName="fk_register_type_id"
                                 baseTableName="par_registry_role"
                                 baseColumnNames="register_type_id"
                                 referencedTableName="reg_register_type"
                                 referencedColumnNames="register_type_id"
                                 onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_role_type_ip"
                                 baseTableName="par_registry_role"
                                 baseColumnNames="role_type_id"
                                 referencedTableName="par_relation_role_type"
                                 referencedColumnNames="role_type_id"
                                 onDelete="NO ACTION"/>

 
        <!-- Poradani -->
        <createTable tableName="arr_change">
            <column name="change_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="change_date" type="timestamp"/>
        </createTable>

        <createTable tableName="arr_level">
            <column name="level_id" type="int">
                <constraints primaryKey="true"/>
            </column>

            <column name="create_change_id" type="int"/>
            <column name="delete_change_id" type="int"/>
            <column name="node_id" type="int"/>
            <column name="node_id_parent" type="int"/>
            <column name="position" type="int"/>
        </createTable>

        <createTable tableName="arr_fund">
            <column name="fund_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="create_date" type="timestamp"/>
            <column name="name" type="nvarchar(255)"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="arr_fund_register_scope">
            <column name="fund_register_scope_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="fund_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="scope_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint
                constraintName="fk_faRegScope_findingAid"
                baseTableName="arr_fund_register_scope" baseColumnNames="fund_id"
                referencedTableName="arr_fund" referencedColumnNames="fund_id"
                onDelete="NO ACTION"/>

        <addForeignKeyConstraint
                constraintName="fk_faRegScope_scope"
                baseTableName="arr_fund_register_scope" baseColumnNames="scope_id"
                referencedTableName="reg_scope" referencedColumnNames="scope_id"
                onDelete="NO ACTION"/>

        <createTable tableName="rul_arrangement_type">
            <column name="arrangement_type_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="code" type="nvarchar(50)"/>
            <column name="name" type="nvarchar(250)"/>
            <column name="rule_set_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_rule_set">
            <column name="rule_set_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="code" type="nvarchar(50)"/>
            <column name="name" type="nvarchar(250)"/>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_fund_version">
            <column name="fund_version_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="arrangement_type_id" type="int"/>
            <column name="create_change_id" type="int"/>
            <column name="fund_id" type="int"/>
            <column name="lock_change_id" type="int"/>
            <column name="rule_set_id" type="int"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
            <column name="root_node_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="last_change_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_desc_item">
            <column name="desc_item_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="create_change_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="delete_change_id" type="int"/>
            <column name="desc_item_object_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_spec_id" type="int"/>
            <column name="node_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="position" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="arr_data">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="data_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_id" type="int"/>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="arr_data_unitdate">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="calendar_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="value_from" type="char(19)">
                <constraints nullable="true"/>
            </column>
            <column name="value_from_estimated" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="value_to" type="char(19)">
                <constraints nullable="true"/>
            </column>
            <column name="value_to_estimated" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="format" defaultValue="" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_string">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="nvarchar(1000)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_unitid">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_integer">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_text">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="${type.text}">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_decimal">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="value" type="decimal">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_fa_view">
            <column name="fa_view_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="arrangement_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="rule_set_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="view_specification" type="nvarchar(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="int" defaultValueNumeric="0"/>
        </createTable>

        <createTable tableName="rul_desc_item_type">
            <column name="desc_item_type_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="data_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="nvarchar(50)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="shortcut" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="${type.text}">
                <constraints nullable="false"/>
            </column>
            <column name="is_value_unique" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="can_be_ordered" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="use_specification" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="view_order" type="int"/>
            <column name="fa_only" type="boolean"/>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_desc_item_spec">
            <column name="desc_item_spec_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="desc_item_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="nvarchar(50)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="shortcut" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="${type.text}">
                <constraints nullable="false"/>
            </column>
            <column name="view_order" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_coordinates">
            <column name="value" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_record_ref">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="record_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_party_ref">
            <column name="position" type="int"/>
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="party_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_node">
            <column name="node_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="version" type="int" defaultValueNumeric="0"/>
            <column name="last_update" type="timestamp"/>
            <column name="uuid" defaultValue="" type="char(36)"/>
        </createTable>

        <addForeignKeyConstraint constraintName="fk_fundVersion_node"
                                 baseTableName="arr_fund_version"
                                 baseColumnNames="root_node_id"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id"
                                 onDelete="NO ACTION"/>

        <createTable tableName="rul_desc_item_constraint">
            <column name="desc_item_constraint_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="desc_item_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_spec_id" type="int"/>
            <column name="fund_version_id" type="int"/>
            <column name="repeatable" type="boolean"/>
            <column name="regexp" type="nvarchar(500)"/>
            <column name="text_lenght_limit" type="int"/>
            <column name="code" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_desc_item_spec_register">
            <column name="desc_item_spec_register_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="register_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_spec_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_node_register">
            <column name="node_register_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="record_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="node_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="create_change_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="delete_change_id" type="int"/>
        </createTable>

        <createTable tableName="rul_packet_type">
            <column name="packet_type_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="code" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="nvarchar(250)">
                <constraints nullable="false"/>
            </column>
            <column name="shortcut" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_packet">
            <column name="packet_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="storage_number" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="invalid_packet" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="packet_type_id" type="int">
                <constraints nullable="true"/>
            </column>
            <column name="fund_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addUniqueConstraint tableName="arr_packet" columnNames="fund_id, storage_number" />

        <createTable tableName="arr_data_packet_ref">
            <column name="data_id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="packet_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_bulk_action_run">
            <column name="bulk_action_run_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="bulk_action_code" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="fund_version_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="change_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arr_data_null">
            <column name="data_id" type="int">
                <constraints primaryKey="true"/>
            </column>
        </createTable>

        <createTable tableName="arr_node_conformity">
            <column name="node_conformity_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="node_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="fund_version_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="state" type="char(3)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="nvarchar(1000)"/>
            <column name="date" type="timestamp"/>
        </createTable>

        <createTable tableName="arr_node_conformity_missing">
            <column name="node_conformity_missing_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="node_conformity_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_type_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_spec_id" type="int"/>
            <column name="description" type="nvarchar(1000)"/>
        </createTable>

        <createTable tableName="arr_node_conformity_error">
            <column name="node_conformity_error_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="node_conformity_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="desc_item_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="nvarchar(1000)"/>
        </createTable>

        <createTable tableName="arr_version_conformity">
            <column name="version_conformity_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="fund_version_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="state" type="char(3)"/>
            <column name="state_description" type="nvarchar(1000)"/>
        </createTable>

        <createTable tableName="rul_package">
            <column name="package_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="name" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="nvarchar(50)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="description" type="${type.text}">
                <constraints nullable="true"/>
            </column>
            <column name="version" type="int" />
        </createTable>

        <createTable tableName="rul_action">
            <column name="action_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="filename" type="nvarchar(250)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="rul_rule">
            <column name="rule_id" type="int">
                <constraints primaryKey="true"/>
            </column>
            <column name="filename" type="nvarchar(250)">
                <constraints unique="true" nullable="false"/>
            </column>
            <column name="rule_type" type="nvarchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="priority" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="package_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="rule_set_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint constraintName="fk_arr_level_1"
                                 baseTableName="arr_level"
                                 baseColumnNames="create_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_level_2"
                                 baseTableName="arr_level"
                                 baseColumnNames="delete_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_1"
                                 baseTableName="arr_fund_version"
                                 baseColumnNames="lock_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_2"
                                 baseTableName="arr_fund_version"
                                 baseColumnNames="rule_set_id"
                                 referencedTableName="rul_rule_set"
                                 referencedColumnNames="rule_set_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_3"
                                 baseTableName="arr_fund_version"
                                 baseColumnNames="create_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_4"
                                 baseTableName="arr_fund_version"
                                 baseColumnNames="arrangement_type_id"
                                 referencedTableName="rul_arrangement_type"
                                 referencedColumnNames="arrangement_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arr_finding_aid_version_5"
                                 baseTableName="arr_fund_version"
                                 baseColumnNames="fund_id"
                                 referencedTableName="arr_fund"
                                 referencedColumnNames="fund_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataString_data"
                                 baseTableName="arr_data_string"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataInt_data"
                                 baseTableName="arr_data_integer"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataText_data"
                                 baseTableName="arr_data_text"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_data_descItem"
                                 baseTableName="arr_data"
                                 baseColumnNames="desc_item_id"
                                 referencedTableName="arr_desc_item"
                                 referencedColumnNames="desc_item_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_data_dataType"
                                 baseTableName="arr_data"
                                 baseColumnNames="data_type_id"
                                 referencedTableName="rul_data_type"
                                 referencedColumnNames="data_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataDecimal_data"
                                 baseTableName="arr_data_decimal"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_descItem_crChange"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="create_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_descItem_delChange"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="delete_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_descItem_descItemType"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="desc_item_type_id"
                                 referencedTableName="rul_desc_item_type"
                                 referencedColumnNames="desc_item_type_id"
                                 onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_descItem_descItemSpec"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="desc_item_spec_id"
                                 referencedTableName="rul_desc_item_spec"
                                 referencedColumnNames="desc_item_spec_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_view_arrType"
                                 baseTableName="rul_fa_view"
                                 baseColumnNames="arrangement_type_id"
                                 referencedTableName="rul_arrangement_type"
                                 referencedColumnNames="arrangement_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_view_ruleSet"
                                 baseTableName="rul_fa_view"
                                 baseColumnNames="rule_set_id"
                                 referencedTableName="rul_rule_set"
                                 referencedColumnNames="rule_set_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemType_dataType"
                                 baseTableName="rul_desc_item_type"
                                 baseColumnNames="data_type_id"
                                 referencedTableName="rul_data_type"
                                 referencedColumnNames="data_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemConst_itmType"
                                 baseTableName="rul_desc_item_constraint"
                                 baseColumnNames="desc_item_type_id"
                                 referencedTableName="rul_desc_item_type"
                                 referencedColumnNames="desc_item_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemConst_itmSpec"
                                 baseTableName="rul_desc_item_constraint"
                                 baseColumnNames="desc_item_spec_id"
                                 referencedTableName="rul_desc_item_spec"
                                 referencedColumnNames="desc_item_spec_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemConst_version"
                                 baseTableName="rul_desc_item_constraint"
                                 baseColumnNames="fund_version_id"
                                 referencedTableName="arr_fund_version"
                                 referencedColumnNames="fund_version_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_itemSpec_descItmTyp"
                                 baseTableName="rul_desc_item_spec"
                                 baseColumnNames="desc_item_type_id"
                                 referencedTableName="rul_desc_item_type"
                                 referencedColumnNames="desc_item_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_party_regRecord"
                                 baseTableName="par_party"
                                 baseColumnNames="record_id"
                                 referencedTableName="reg_record"
                                 referencedColumnNames="record_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_variantRecord_regRecord"
                                 baseTableName="reg_variant_record"
                                 baseColumnNames="record_id"
                                 referencedTableName="reg_record"
                                 referencedColumnNames="record_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_record_regRegisterType"
                                 baseTableName="reg_record"
                                 baseColumnNames="register_type_id"
                                 referencedTableName="reg_register_type"
                                 referencedColumnNames="register_type_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_record_regExternalSource"
                                 baseTableName="reg_record"
                                 baseColumnNames="external_source_id"
                                 referencedTableName="reg_external_source"
                                 referencedColumnNames="external_source_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataCoordinates_data"
                                 baseTableName="arr_data_coordinates"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataRecordRef_data"
                                 baseTableName="arr_data_record_ref"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataRecordRef_record"
                                 baseTableName="arr_data_record_ref"
                                 baseColumnNames="record_id"
                                 referencedTableName="reg_record"
                                 referencedColumnNames="record_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataPartyRef_data"
                                 baseTableName="arr_data_party_ref"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataPartyRef_party"
                                 baseTableName="arr_data_party_ref"
                                 baseColumnNames="party_id"
                                 referencedTableName="par_party"
                                 referencedColumnNames="party_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataUnitid_data"
                                 baseTableName="arr_data_unitid"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataUnitdate_data_2"
                                 baseTableName="arr_data_unitdate"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rulSet_arrType"
                                 baseTableName="rul_arrangement_type"
                                 baseColumnNames="rule_set_id"
                                 referencedTableName="rul_rule_set"
                                 referencedColumnNames="rule_set_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_level_node"
                                 baseTableName="arr_level"
                                 baseColumnNames="node_id"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_level_node_parent"
                                 baseTableName="arr_level"
                                 baseColumnNames="node_id_parent"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_descItem_node"
                                 baseTableName="arr_desc_item"
                                 baseColumnNames="node_id"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_rule_set_package"
                                 baseTableName="rul_rule_set"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_arrangement_type_package"
                                 baseTableName="rul_arrangement_type"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_desc_item_type_package"
                                 baseTableName="rul_desc_item_type"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_desc_item_spec_package"
                                 baseTableName="rul_desc_item_spec"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_desc_item_constraint_package"
                                 baseTableName="rul_desc_item_constraint"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_action_package"
                                 baseTableName="rul_action"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_rule_package"
                                 baseTableName="rul_rule"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_rule_rule_set"
                                 baseTableName="rul_rule"
                                 baseColumnNames="rule_set_id"
                                 referencedTableName="rul_rule_set"
                                 referencedColumnNames="rule_set_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rulDescItemSpecRegister_registerType"
                                 baseTableName="rul_desc_item_spec_register" baseColumnNames="register_type_id"
                                 referencedTableName="reg_register_type"
                                 referencedColumnNames="register_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rulDescItemSpecRegister_descItemSpec"
                                 baseTableName="rul_desc_item_spec_register" baseColumnNames="desc_item_spec_id"
                                 referencedTableName="rul_desc_item_spec"
                                 referencedColumnNames="desc_item_spec_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrDataUnitdate_calendarType"
                                 baseTableName="arr_data_unitdate" baseColumnNames="calendar_type_id"
                                 referencedTableName="arr_calendar_type"
                                 referencedColumnNames="calendar_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_parParty_parPartyType"
                                 baseTableName="par_party" baseColumnNames="party_type_id"
                                 referencedTableName="par_party_type"
                                 referencedColumnNames="party_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_nodeRegister_record"
                                 baseTableName="arr_node_register"
                                 baseColumnNames="record_id"
                                 referencedTableName="reg_record"
                                 referencedColumnNames="record_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_nodeRegister_node"
                                 baseTableName="arr_node_register"
                                 baseColumnNames="node_id"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_nodeRegister_crChange"
                                 baseTableName="arr_node_register"
                                 baseColumnNames="create_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_nodeRegister_delChange"
                                 baseTableName="arr_node_register"
                                 baseColumnNames="delete_change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_packet_packetType"
                                 baseTableName="arr_packet"
                                 baseColumnNames="packet_type_id"
                                 referencedTableName="rul_packet_type"
                                 referencedColumnNames="packet_type_id"
                                 onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_packet_findingAid"
                                 baseTableName="arr_packet"
                                 baseColumnNames="fund_id"
                                 referencedTableName="arr_fund"
                                 referencedColumnNames="fund_id"
                                 onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_packetRef_data"
                                 baseTableName="arr_data_packet_ref"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>
        <addForeignKeyConstraint constraintName="fk_packetRef_packet"
                                 baseTableName="arr_data_packet_ref"
                                 baseColumnNames="packet_id"
                                 referencedTableName="arr_packet"
                                 referencedColumnNames="packet_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrFaVersionConfInfo_faVersion"
                                 baseTableName="arr_version_conformity" baseColumnNames="fund_version_id"
                                 referencedTableName="arr_fund_version"
                                 referencedColumnNames="fund_version_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrFaBulkAction_faVersion"
                                 baseTableName="arr_bulk_action_run" baseColumnNames="fund_version_id"
                                 referencedTableName="arr_fund_version"
                                 referencedColumnNames="fund_version_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrFaBulkAction_faChange"
                                 baseTableName="arr_bulk_action_run" baseColumnNames="change_id"
                                 referencedTableName="arr_change"
                                 referencedColumnNames="change_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_dataNull_data"
                                 baseTableName="arr_data_null"
                                 baseColumnNames="data_id"
                                 referencedTableName="arr_data"
                                 referencedColumnNames="data_id"
                                 onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfInfo_faNode"
                                 baseTableName="arr_node_conformity" baseColumnNames="node_id"
                                 referencedTableName="arr_node"
                                 referencedColumnNames="node_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfInfo_faVersion"
                                 baseTableName="arr_node_conformity" baseColumnNames="fund_version_id"
                                 referencedTableName="arr_fund_version"
                                 referencedColumnNames="fund_version_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfMiss_nodConfInf"
                                 baseTableName="arr_node_conformity_missing" baseColumnNames="node_conformity_id"
                                 referencedTableName="arr_node_conformity"
                                 referencedColumnNames="node_conformity_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfMiss_descItmTyp"
                                 baseTableName="arr_node_conformity_missing" baseColumnNames="desc_item_type_id"
                                 referencedTableName="rul_desc_item_type"
                                 referencedColumnNames="desc_item_type_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfMiss_descItmSpc"
                                 baseTableName="arr_node_conformity_missing" baseColumnNames="desc_item_spec_id"
                                 referencedTableName="rul_desc_item_spec"
                                 referencedColumnNames="desc_item_spec_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfErr_nodConfInf"
                                 baseTableName="arr_node_conformity_error" baseColumnNames="node_conformity_id"
                                 referencedTableName="arr_node_conformity"
                                 referencedColumnNames="node_conformity_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_arrNodeConfErr_descItem"
                                 baseTableName="arr_node_conformity_error" baseColumnNames="desc_item_id"
                                 referencedTableName="arr_desc_item"
                                 referencedColumnNames="desc_item_id" onDelete="NO ACTION"/>

        <addForeignKeyConstraint constraintName="fk_rul_packet_type_package"
                                 baseTableName="rul_packet_type"
                                 baseColumnNames="package_id"
                                 referencedTableName="rul_package"
                                 referencedColumnNames="package_id"
                                 onDelete="NO ACTION"/>

        <addUniqueConstraint tableName="arr_level" columnNames="position,node_id_parent,delete_change_id"
                             constraintName="u_arr_level_ppd"/>

        <addUniqueConstraint columnNames="view_order"
                             constraintName="rul_desc_item_type_view_order_key"
                             tableName="rul_desc_item_type"/>

        <addUniqueConstraint tableName="rul_packet_type" columnNames="code" constraintName="u_rul_packet_type_code"/>

        <addNotNullConstraint columnName="fa_only"
                              columnDataType="boolean"
                              defaultNullValue="false"
                              tableName="rul_desc_item_type"/>

        <addNotNullConstraint columnDataType="int"
                              columnName="party_type_id"
                              tableName="par_party"/>

        <addNotNullConstraint tableName="arr_node" columnName="uuid" columnDataType="char(36)"/>
        <addUniqueConstraint columnNames="uuid" tableName="arr_node"/>

        <createIndex tableName="arr_level" indexName="i_node_id_1">
            <column name="node_id"/>
            <column name="delete_change_id"/>
            <column name="create_change_id"/>
        </createIndex>

        <createIndex tableName="arr_level" indexName="i_node_id_parent_1">
            <column name="node_id_parent"/>
            <column name="delete_change_id"/>
            <column name="create_change_id"/>
        </createIndex>

    </changeSet>

    <!--Verze 1.1 - import základních dat (číselníky) -->
    <changeSet id="2" author="bendik" >
  <!-- Run this only on new DB (before db.elza-0.9.xml -->
  <preConditions onFail="MARK_RAN">
    <not>
      <changeSetExecuted id="20161124152303" author="compel" changeLogFile="db/changelog/db.elza-0.9.xml" />
    </not>
  </preConditions>

        <insert tableName="rul_data_type" ><column name="data_type_id" value="1" /><column name="code" value="INT" /><column name="name" value="Celé číslo" /><column name="description" value="Celé číslo." /><column name="regexp_use" value="false" /><column name="text_lenght_limit_use" value="false" /><column name="storage_table" value="arr_data_integer" /></insert>
        <insert tableName="rul_data_type" ><column name="data_type_id" value="2" /><column name="code" value="STRING" /><column name="name" value="Řetězec" /><column name="description" value="Textový řetězec o maximální délce 250 znaků." /><column name="regexp_use" value="true" /><column name="text_lenght_limit_use" value="true" /><column name="storage_table" value="arr_data_string" /></insert>
        <insert tableName="rul_data_type" ><column name="data_type_id" value="3" /><column name="code" value="TEXT" /><column name="name" value="Text" /><column name="description" value="Textové pole pro dlouhý text." /><column name="regexp_use" value="false" /><column name="text_lenght_limit_use" value="false" /><column name="storage_table" value="arr_data_text" /></insert>
        <insert tableName="rul_data_type" ><column name="data_type_id" value="4" /><column name="code" value="UNITDATE" /><column name="name" value="Datace" /><column name="description" value="Prvek pro uložení datace včetně rozsahu, tj. od-do" /><column name="regexp_use" value="false" /><column name="text_lenght_limit_use" value="false" /><column name="storage_table" value="arr_data_unitdate" /></insert>
        <insert tableName="rul_data_type" ><column name="data_type_id" value="5" /><column name="code" value="UNITID" /><column name="name" value="Referenční číslo" /><column name="description" value="Referenční číslo" /><column name="regexp_use" value="false" /><column name="text_lenght_limit_use" value="false" /><column name="storage_table" value="arr_data_unitid" /></insert>
        <insert tableName="rul_data_type" ><column name="data_type_id" value="6" /><column name="code" value="FORMATTED_TEXT" /><column name="name" value="Formátovaný text" /><column name="description" value="Pole pro formátovaný text" /><column name="regexp_use" value="false" /><column name="text_lenght_limit_use" value="false" /><column name="storage_table" value="arr_data_text" /></insert>
        <insert tableName="rul_data_type" ><column name="data_type_id" value="7" /><column name="code" value="COORDINATES" /><column name="name" value="Souřadnice" /><column name="description" value="Souřadnice mapy či jiného objektu" /><column name="regexp_use" value="false" /><column name="text_lenght_limit_use" value="false" /><column name="storage_table" value="arr_data_coordinates" /></insert>
        <insert tableName="rul_data_type" ><column name="data_type_id" value="8" /><column name="code" value="PARTY_REF" /><column name="name" value="Odkaz na osobu" /><column name="description" value="Odkaz na osobu" /><column name="regexp_use" value="false" /><column name="text_lenght_limit_use" value="false" /><column name="storage_table" value="arr_data_party_ref" /></insert>
        <insert tableName="rul_data_type" ><column name="data_type_id" value="9" /><column name="code" value="RECORD_REF" /><column name="name" value="Záznam v rejstříku" /><column name="description" value="Odkaz na záznam v rejstříku" /><column name="regexp_use" value="false" /><column name="text_lenght_limit_use" value="false" /><column name="storage_table" value="arr_data_record_ref" /></insert>
        <insert tableName="rul_data_type"><column name="data_type_id" value="10"/><column name="code" value="DECIMAL"/><column name="name" value="Desetinné číslo"/><column name="description" value="Desetinné číslo"/><column name="regexp_use" value="false"/><column name="text_lenght_limit_use" value="false"/><column name="storage_table" value="arr_data_decimal"/></insert>
        <insert tableName="rul_data_type"><column name="data_type_id" value="11"/><column name="code" value="PACKET_REF"/><column name="name" value="Odkaz na obal"/><column name="description" value="Odkaz na obal"/><column name="regexp_use" value="false"/><column name="text_lenght_limit_use" value="false"/><column name="storage_table" value="arr_data_packet_ref"/></insert>
        <insert tableName="rul_data_type"><column name="data_type_id" value="12"/><column name="code" value="ENUM"/><column name="name" value="Výčet"/><column name="description" value="Výčet"/><column name="regexp_use" value="false"/><column name="text_lenght_limit_use" value="false"/><column name="storage_table" value="arr_data_null"/></insert>

        <insert tableName="par_party_type" ><column name="party_type_id" value="1" /><column name="code" value="PERSON" /><column name="name" value="OSOBA" /><column name="description" value="OSOBA" /></insert>
        <insert tableName="par_party_type" ><column name="party_type_id" value="2" /><column name="code" value="DYNASTY" /><column name="name" value="ROD" /><column name="description" value="ROD" /></insert>
        <insert tableName="par_party_type" ><column name="party_type_id" value="3" /><column name="code" value="GROUP_PARTY" /><column name="name" value="KORPORACE" /><column name="description" value="KORPORACE" /></insert>
        <insert tableName="par_party_type" ><column name="party_type_id" value="4" /><column name="code" value="EVENT" /><column name="name" value="DOČASNÁ KORPORACE" /><column name="description" value="DOČASNÁ KORPORACE" /></insert>

        <insert tableName="arr_calendar_type"><column name="calendar_type_id" value="1"/><column name="code" value="GREGORIAN"/><column name="name" value="Gregoriánský"/></insert>
        <insert tableName="arr_calendar_type"><column name="calendar_type_id" value="2"/><column name="code" value="JULIAN"/><column name="name" value="Juliánský"/></insert>

        <insert tableName="db_hibernate_sequences"><column name="sequence_name" value="rul_data_type|data_type_id"/><column name="next_val" value="13"/></insert>
        <insert tableName="db_hibernate_sequences"><column name="sequence_name" value="par_party_type|party_type_id"/><column name="next_val" value="5"/></insert>
        <insert tableName="db_hibernate_sequences"><column name="sequence_name" value="par_party_subtype|party_subtype_id"/><column name="next_val" value="22"/></insert>
        <insert tableName="db_hibernate_sequences"><column name="sequence_name" value="reg_register_type|register_type_id"/><column name="next_val" value="53"/></insert>
        <insert tableName="db_hibernate_sequences"><column name="sequence_name" value="arr_calendar_type|calendar_type_id"/><column name="next_val" value="3"/></insert>
        <insert tableName="db_hibernate_sequences"><column name="sequence_name" value="reg_scope|scope_id"/><column name="next_val" value="2"/></insert>

        <insert tableName="reg_scope">
            <column name="scope_id" value="1" type="int"/>
            <column name="code" value="GLOBAL"/>
            <column name="name" value="globální"/>
        </insert>

     </changeSet>

</databaseChangeLog>
